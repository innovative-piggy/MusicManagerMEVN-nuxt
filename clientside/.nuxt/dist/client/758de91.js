(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{214:function(t,e,r){"use strict";r.r(e);r(11),r(36);var c=r(15),l={data:function(){return{musicDetails:{title:"",artist:"",music:""},allmusic:[],addState:!1,addLoading:!1,musicLoading:!1,isValid:!1}},computed:{isDisabled:function(){if(""===this.musicDetails.title||""===this.musicDetails.artist||""===this.musicDetails.music)return!this.isValid}},methods:{initForm:function(){this.addState=!this.addState},handleFileUpload:function(){this.musicDetails.music=this.$refs.file.files[0],console.log(this.musicDetails.music.type)},getAllMusics:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.musicLoading=!0,e.prev=1,e.next=4,t.$axios.$get("/music");case 4:data=e.sent,t.allmusic=data,t.musicLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.musicLoading=!1,swal("Error","Error Fetting Musics","error");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},addNewMusic:function(){var t=this,e=/(\.|\/)(mp3|mp4)$/i;if(!e.test(this.musicDetails.music.type)&&!e.test(this.musicDetails.music.name))return swal("Error","Invalid file type","error"),!this.isValid;var r=new FormData;r.append("title",this.musicDetails.title),r.append("artist",this.musicDetails.artist),r.append("music",this.musicDetails.music),this.addLoading=!0,this.$axios.$post("/music",r).then((function(e){console.log(e),t.addLoading=!1,t.musicDetails={},t.getAllMusics(),swal("Success","New Music Added","success")})).catch((function(e){t.addLoading=!1,swal("Error","Something Went wrong","error"),console.log(e)}))},deleteMusic:function(t){var e=this;swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Music!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(r){r?e.$axios.$delete("/music/"+t).then((function(t){e.getAllMusics(),swal("Poof! Your Music file has been deleted!",{icon:"success"})})).catch((function(t){swal("Error","Somethimg went wrong","error")})):swal("Your Music file is safe!")}))}},created:function(){this.getAllMusics()}},n=r(35),o={components:{manager:Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"mt-5"},[r("div",{staticClass:"container mb-4"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[t.addState?r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[t._m(0),t._v(" "),r("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.addNewMusic(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[t._v("Title")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.musicDetails.title,expression:"musicDetails.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.musicDetails.title},on:{input:function(e){e.target.composing||t.$set(t.musicDetails,"title",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"artist"}},[t._v("Artist")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.musicDetails.artist,expression:"musicDetails.artist"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.musicDetails.artist},on:{input:function(e){e.target.composing||t.$set(t.musicDetails,"artist",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"artist"}},[t._v("Music")]),t._v(" "),r("div",{staticClass:"custom-file"},[r("input",{ref:"file",staticClass:"custom-file-input",attrs:{type:"file",id:"customFile"},on:{change:function(e){return t.handleFileUpload()}}}),t._v(" "),r("label",{staticClass:"custom-file-label",attrs:{for:"customFile"}},[t._v("Choose file")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDisabled}},[t.addLoading?r("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("Submit\n                ")])])])])]):t._e()])])]),t._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card bg-light p-1 showdow-sm"},[r("div",{staticClass:"card-title"},[r("button",{staticClass:"btn btn-info m-3",on:{click:t.initForm}},[t._v(t._s(t.addState?"Cancel":"Add New Music"))])]),t._v(" "),r("div",{staticClass:"card-body"},[r("table",{staticClass:"table"},[t._m(1),t._v(" "),t.musicLoading?r("div",{staticClass:"spinner-border",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[r("span",{staticClass:"sr-only"},[t._v("Loading...")])]):r("tbody",t._l(t.allmusic,(function(e,c){return r("tr",{key:c},[r("td",[t._v(t._s(c+1))]),t._v(" "),r("td",[t._v(t._s(e.title))]),t._v(" "),r("td",[t._v(t._s(e.artist))]),t._v(" "),r("td",[t._v(t._s(e.created))]),t._v(" "),r("td",[r("button",{staticClass:"btn btn-info",on:{click:function(r){return t.deleteMusic(e._id)}}},[t._v("Delete")])])])})),0)])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-title mb-4"},[e("h4",[this._v("Add Music")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Title")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Artist")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Date created")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],!1,null,null,null).exports}},d=Object(n.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("manager")],1)}),[],!1,null,null,null);e.default=d.exports}}]);